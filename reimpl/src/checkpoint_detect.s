/* checkpoint_detect -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x0600D780 - 0x0600D9BC
 * Auto-generated by tools/generate_l3_tu.py
 */

    .section .text.FUN_0600D780


    .global checkpoint_detect
    .type checkpoint_detect, @function
checkpoint_detect:
    mov.l r14, @-r15
    mov r4, r14
    mov.l r13, @-r15
    sts.l pr, @-r15
    mov.l   .L_sym_0607E940, r4
    mov.w   DAT_0600d82a, r0
    mov.l @r4, r4
    mov.l @(r0, r4), r5
    add #0x4, r0
    mov.l @(r0, r4), r3
    sub r3, r5
    tst r5, r5
    bt      .L_0600D844
    mov.l   .L_sym_06063F1C, r7
    mov #-0x1, r3
    mov.l   .L_sym_0607EA9C, r6
    cmp/ge r3, r5
    bt/s    .L_0600D7D8
    mov #0x0, r13
    mov.w   .L_const_0x228_w, r0
    mov.l @(r0, r4), r3
    add #0x1, r3
    mov.l r3, @(r0, r4)
    add #-0x40, r0
    mov.l @r6, r2
    mov.l @(r0, r4), r3
    cmp/eq r2, r3
    bf      .L_0600D844
    tst r14, r14
    bf      .L_0600D844
    mov.w   DAT_0600d82e, r0
    mov.l r13, @(r0, r4)
    mov.l   .L_sym_06063F18, r3
    mov.l @r3, r3
    mov.l r3, @r7
    .byte   0xB0, 0xF9    /* bsr 0x0600D9BC (external) */
    mov #0x0, r4
    bsr     lap_time_record
    nop
    extu.b r13, r13
    mov.l   .L_sym_0605DE3C, r3
    mov.b r13, @r3
    bra     .L_0600D844
    nop
.L_0600D7D8:
    mov #0x1, r2
    cmp/gt r2, r5
    bf      .L_0600D818
    mov.w   .L_const_0x228_w, r0
    mov.l @(r0, r4), r2
    add #-0x1, r2
    mov.l r2, @(r0, r4)
    mov.l @r6, r3
    mov #0x0, r2
    add #-0x40, r0
    cmp/gt r3, r2
    mov.l @(r0, r4), r1
    addc r2, r3
    shar r3
    cmp/ge r3, r1
    bf      .L_0600D844
    tst r14, r14
    bf      .L_0600D844
    mov.w   DAT_0600d82e, r0
    mov.l r13, @(r0, r4)
    mov.l   .L_sym_06063F18, r3
    mov.l @r3, r3
    mov.l r3, @r7
    .byte   0xB0, 0xD9    /* bsr 0x0600D9BC (external) */
    mov #0x0, r4
    bsr     lap_time_record
    nop
    mov #0x1, r2
    mov.l   .L_sym_0605DE3C, r3
    mov.b r2, @r3
    bra     .L_0600D844
    nop
.L_0600D818:
    tst r14, r14
    bf      .L_0600D844
    bsr     .L_0600D84C
    nop
    mov r14, r4
    lds.l @r15+, pr
    mov.l @r15+, r13
    bra     .L_0600D8A4
    mov.l @r15+, r14

    .global DAT_0600d82a
DAT_0600d82a:
    .2byte  0x01EC
.L_const_0x228_w:
    .2byte  0x0228

    .global DAT_0600d82e
DAT_0600d82e:
    .2byte  0x01E8
.L_sym_0607E940:
    .4byte  sym_0607E940
.L_sym_06063F1C:
    .4byte  sym_06063F1C
.L_sym_0607EA9C:
    .4byte  sym_0607EA9C
.L_sym_06063F18:
    .4byte  sym_06063F18
.L_sym_0605DE3C:
    .4byte  sym_0605DE3C
.L_0600D844:
    lds.l @r15+, pr
    mov.l @r15+, r13
    rts
    mov.l @r15+, r14
.L_0600D84C:
    mov.l   .L_sym_0607E940_2, r4
    mov.w   DAT_0600d894, r0
    mov.l @r4, r4
    mov.l @(r0, r4), r5
    add #-0x4, r0
    mov r5, r6
    mov.l @(r0, r4), r3
    sub r3, r6
    cmp/pl r6
    bf      .L_0600D86C
    mov #0x10, r2
    cmp/ge r2, r6
    bt      .L_0600D86C
    mov.w   .L_const_0x1e8_w, r0
    bra     .L_0600D890
    mov.l r5, @(r0, r4)
.L_0600D86C:
    mov.l   .L_sym_0607EA9C_2, r6
    mov #0x0, r2
    mov.l @r6, r6
    cmp/gt r6, r2
    addc r2, r6
    shar r6
    cmp/eq r6, r5
    bt      .L_0600D884
    mov r6, r2
    add #0x2, r2
    cmp/eq r2, r5
    bf      .L_0600D890
.L_0600D884:
    mov.w   .L_const_0x1e8_w, r0
    mov.l r5, @(r0, r4)
    add #0x40, r0
    mov.l @(r0, r4), r3
    mov.l   .L_sym_06063F20, r2
    mov.l r3, @r2
.L_0600D890:
    rts
    nop

    .global DAT_0600d894
DAT_0600d894:
    .2byte  0x01EC
.L_const_0x1e8_w:
    .2byte  0x01E8
.L_sym_0607E940_2:
    .4byte  sym_0607E940
.L_sym_0607EA9C_2:
    .4byte  sym_0607EA9C
.L_sym_06063F20:
    .4byte  sym_06063F20
.L_0600D8A4:
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */

    .global lap_time_record
    .type lap_time_record, @function
lap_time_record:
    mov.l r14, @-r15
    sts.l pr, @-r15
    mov.l   .L_sym_0607E940_3, r14
    mov.l   .L_sym_06063F28, r3
    mov.w   DAT_0600d996, r0
    mov.l @r14, r14
    mov.l @r3, r3
    mov.l @(r0, r14), r2
    add #-0x1, r3
    cmp/hi r3, r2
    bf      .L_0600D950
    mov #0x3, r2
    mov.l   .L_sym_0607EBF4, r3
    mov.l r2, @r3
    mov.w   DAT_0600d998, r0
    mov.l @(r0, r14), r2
    add #0x1, r2
    mov.l r2, @(r0, r14)
.L_0600D950:
    mov #0x28, r3
    mov.l   .L_sym_0607EAC0, r2
    mov.l r3, @r2
    .byte   0xB1, 0xB7    /* bsr 0x0600DCC8 (external) */
    nop
    mov.l   .L_sym_060786B0, r5
    mov.w   DAT_0600d99a, r0
    mov.l @r5, r4
    mov.l @r5, r3
    mov.l @(r0, r14), r2
    mov.l r3, @(r0, r14)
    sub r2, r4
    mov.l @(r0, r14), r3
    mov.l   .L_sym_060786A4, r2
    add #-0xC, r0
    mov.l r3, @r2
    mov.l r4, @(r0, r14)
    add #-0x4, r0
    mov.l   .L_sym_0607EBF8, r2
    mov.l @(r0, r14), r3
    add #0x24, r0
    add #-0x1, r3
    shll2 r3
    add r2, r3
    mov.l r4, @r3
    mov.l @(r0, r14), r5
    cmp/ge r5, r4
    bf      .L_0600D98C
    tst r5, r5
    bf      .L_0600D990
.L_0600D98C:
    mov.w   .L_const_0x240_w, r0
    mov.l r4, @(r0, r14)
.L_0600D990:
    lds.l @r15+, pr
    rts
    mov.l @r15+, r14

    .global DAT_0600d996
DAT_0600d996:
    .2byte  0x021C

    .global DAT_0600d998
DAT_0600d998:
    .2byte  0x0230

    .global DAT_0600d99a
DAT_0600d99a:
    .2byte  0x022C
.L_const_0x240_w:
    .2byte  0x0240
    .2byte  0xFFFF
.L_sym_0607E940_3:
    .4byte  sym_0607E940
.L_sym_06063F28:
    .4byte  sym_06063F28
.L_sym_0607EBF4:
    .4byte  sym_0607EBF4
.L_sym_0607EAC0:
    .4byte  sym_0607EAC0
.L_sym_060786B0:
    .4byte  sym_060786B0
.L_sym_060786A4:
    .4byte  sym_060786A4
.L_sym_0607EBF8:
    .4byte  sym_0607EBF8
