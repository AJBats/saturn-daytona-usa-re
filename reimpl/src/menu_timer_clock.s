/* menu_timer_clock -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x0603B634 - 0x0603B680
 * Auto-generated by tools/generate_l3_tu.py
 */

    .section .text.FUN_0603B634


    .global menu_timer_clock
    .type menu_timer_clock, @function
menu_timer_clock:
    sts.l pr, @-r15                     ! save return address
    mov r4, r14                         ! r14 = element pointer
    mov.l @r14, r0                      ! r0 = element data base
    mov.b @(r0, r1), r0                 ! r0 = element status byte
    extu.b r0, r0                       ! zero-extend to 32-bit
    tst #0x60, r0                       ! test timer active bits
    bf      .L_timer_inactive           ! if any active bit set, skip to return 0
    bra     .L_run_timer                ! fall through to timer logic
    nop
.L_run_timer:
    .byte   0xBD, 0x07    /* bsr 0x0603B058 (external) */  ! call menu_element_dispatch
    mov r14, r4                         ! delay slot: r4 = element pointer
    mov r0, r5                          ! r5 = dispatch result
    .byte   0xD3, 0x13    /* mov.l .L_pool_0603B69C, r3 */ ! r3 = timer_stub address
    jsr @r3                             ! call timer_stub
    mov.l @r14, r4                      ! delay slot: r4 = element data
    tst r0, r0                          ! check timer result
    bf      .L_timer_done               ! if non-zero, timer still running
    mov #-0x14, r4                      ! r4 = -20 (timer expired error code)
    lds.l @r15+, pr                     ! restore return address
    .byte   0xA1, 0x6F    /* bra 0x0603B93C (external) */  ! tail-call save_checksum_calc with error
    mov.l @r15+, r14                    ! delay slot: restore r14
.L_timer_done:
    .byte   0xD2, 0x10    /* mov.l .L_pool_0603B6A0, r2 */ ! r2 = &sym_060A4D14 (global state ptr)
    mov.l @r2, r2                       ! r2 = global state base
    .byte   0x90, 0x19    /* mov.w .L_wpool_0603B698, r0 */ ! r0 = 0x00B8 (timer element offset)
    mov.l r14, @(r0, r2)                ! store element pointer into global state
.L_timer_inactive:
    mov #0x0, r4                        ! r4 = 0 (success)
    lds.l @r15+, pr                     ! restore return address
    .byte   0xA1, 0x67    /* bra 0x0603B93C (external) */  ! tail-call save_checksum_calc with success
    mov.l @r15+, r14                    ! delay slot: restore r14
    .2byte  0xD60C                       ! unreachable â€” adjacent TU code
    .4byte  0x63629012                   ! adjacent TU code
    .4byte  0x03466362                   ! adjacent TU code
    .4byte  0x70040356                   ! adjacent TU code
    .4byte  0xA15EE400                   ! adjacent TU code
