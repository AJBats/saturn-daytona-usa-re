/* sound_init_sequence -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x06012E08 - 0x06012E6A
 * Auto-generated by tools/generate_l3_tu.py
 *
 * Course file load dispatcher.
 * Selects filename + DMA destination based on course ID, then tail-calls
 * cd_dma_setup to perform the actual CD transfer.
 *
 * Arguments:
 *   r4 = course ID (1, 2, or default/0)
 *
 * Data table (embedded):
 *   Pairs of (DMA destination address, filename string pointer) for each
 *   course, plus shared course geometry/texture filenames.
 *
 * sym_06012E62: Secondary entry point (no course ID check, loads default
 *   filename pair directly). Called from engine_init_global.
 */

    .section .text.FUN_06012E08


    .global sound_init_sequence
    .type sound_init_sequence, @function
sound_init_sequence:
    mov.l r14, @-r15                        ! save r14 (callee-saved)
    mov r4, r0                              ! r0 = course ID
    mov.l   .L_pool_dma_dest_default, r14   ! r14 = default DMA destination (0x002A8000)
    cmp/eq #0x1, r0                         ! is course ID == 1?
    bf      .L_not_course1                  ! if not, check next case
    mov r14, r5                             ! r5 = DMA destination address
    mov.l   .L_pool_filename_default, r4    ! r4 = default filename string ptr
    .byte   0xAF, 0x11    /* bra 0x06012C3C (external) */  ! tail-call cd_dma_setup
    mov.l @r15+, r14                        ! restore r14 (delay slot)
    .2byte  0xFFFF                          ! alignment padding
    .4byte  0x00200000                      ! DMA dest: WRAM-Low base (course 1 line data)
    .4byte  0x00240000                      ! DMA dest: WRAM-Low + 0x40000 (course 1 bin)
    .4byte  sym_0604490C                    ! -> "CS1_LINE.BIN"
    .4byte  sym_0604491C                    ! -> "COURSE1.BIN"
    .4byte  sym_06044928                    ! -> "CS2_LINE.BIN"
    .4byte  sym_06044938                    ! -> "COURSE2.BIN"
    .4byte  sym_06044944                    ! -> "CS0_LINE.BIN"
    .4byte  sym_06044954                    ! -> "COURSE0.BIN"
    .4byte  0x002A0000                      ! DMA dest: WRAM-Low + 0xA0000 (player textures)
    .4byte  sym_06044960                    ! -> "TEX_PL.BIN"
.L_pool_dma_dest_default:
    .4byte  0x002A8000                      ! DMA dest: WRAM-Low + 0xA8000 (course textures)
.L_pool_filename_default:
    .4byte  sym_0604496C                    ! -> "TEX_C1.BIN"
.L_not_course1:
    mov r4, r0                              ! r0 = course ID (reload)
    cmp/eq #0x2, r0                         ! is course ID == 2?
    bf      .L_default_course               ! if not, use default course (0)
    mov r14, r5                             ! r5 = DMA destination address
    .byte   0xD4, 0x0D    /* mov.l .L_pool_06012E8C, r4 */  ! r4 = course 2 texture filename ptr
    .byte   0xAE, 0xF1    /* bra 0x06012C3C (external) */    ! tail-call cd_dma_setup
    mov.l @r15+, r14                        ! restore r14 (delay slot)
.L_default_course:
    mov r14, r5                             ! r5 = DMA destination address
    .byte   0xD4, 0x0C    /* mov.l .L_pool_06012E90, r4 */  ! r4 = default (course 0) texture filename ptr
    .byte   0xAE, 0xED    /* bra 0x06012C3C (external) */    ! tail-call cd_dma_setup
    mov.l @r15+, r14                        ! restore r14 (delay slot)

    .global sym_06012E62
sym_06012E62:
    .byte   0xD5, 0x0C    /* mov.l .L_pool_06012E94, r5 */  ! r5 = fixed DMA destination
    .byte   0xD4, 0x0C    /* mov.l .L_pool_06012E98, r4 */  ! r4 = fixed filename ptr
    .byte   0xAE, 0xE9    /* bra 0x06012C3C (external) */    ! tail-call cd_dma_setup
    nop                                     ! (delay slot)
