/* road_segment_check -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x06040C98 - 0x06041180
 * Auto-generated by tools/generate_l3_tu.py
 */

    .section .text.FUN_06040C98


    .global road_segment_check
    .type road_segment_check, @function
road_segment_check:
    mov.l r14, @-r15
    mov.l r13, @-r15
    mov.l r12, @-r15
    mov #0x0, r13
    mov.l r11, @-r15
    mov.l r10, @-r15
    mov.l r9, @-r15
    mov #0x1, r10
    mov.l r8, @-r15
    sts.l pr, @-r15
    add #-0x14, r15
    mov.l   .L_pool_06040D30, r11
    mov.w   DAT_06040d2c, r12
    mov.l   .L_pool_06040D34, r14
    mov.l r5, @r15
    mov.l   .L_pool_06040D38, r3
    jsr @r3
    mov.l r4, @r14
    mov.l @r15, r0
    tst r0, r0
    bt      .L_06040CD4
    mov.l @r14, r2
    add #0x17, r2
    mov.b r10, @r2
    mov.l @r14, r3
    add #0x2F, r3
    exts.b r10, r2
    mov.b r2, @r3
    bra     .L_06040CE2
    nop
.L_06040CD4:
    mov.l @r14, r3
    add #0x17, r3
    mov.b r13, @r3
    mov.l @r14, r2
    add #0x2F, r2
    exts.b r13, r3
    mov.b r3, @r2
.L_06040CE2:
    mov r15, r4
    jsr @r11
    add #0x8, r4
    mov r15, r0
    add #0x8, r0
    mov.b @r0, r0
    extu.b r0, r0
    bra     .L_06040D00
    and #0xF, r0
.L_06040CF4:
    bra     .L_06040E5E
    mov #-0xD, r0
.L_06040CF8:
    bra     .L_06040E5E
    mov #-0xE, r0
.L_06040CFC:
    bra     .L_06040E5E
    mov #-0xA, r0
.L_06040D00:
    cmp/eq #0x6, r0
    bt      .L_06040CF4
    cmp/eq #0x7, r0
    bt      .L_06040CF8
    cmp/eq #0x9, r0
    bt      .L_06040CFC
    cmp/eq #0xA, r0
    bt      .L_06040CFC
    mov r12, r7
    mov r12, r6
    mov.l   .L_pool_06040D3C, r5
    mov.l   .L_pool_06040D40, r3
    jsr @r3
    mov r12, r4
    mov r0, r4
    tst r4, r4
    bt      .L_06040D26
    bra     .L_06040E5E
    mov #-0x2, r0
.L_06040D26:
    mov r13, r8
    bra     .L_06040DA4
    mov r13, r9

    .global DAT_06040d2c
DAT_06040d2c:
    .2byte  0x00FF
    .2byte  0xFFFF
.L_pool_06040D30:
    .4byte  ai_checkpoint_section
.L_pool_06040D34:
    .4byte  sym_060A5400
.L_pool_06040D38:
    .4byte  sym_0604231E
.L_pool_06040D3C:
    .4byte  0x0000FFFF
.L_pool_06040D40:
    .4byte  road_segment_query
.L_06040D44:
    mov.w   DAT_06040dc0, r2
    mov.l   .L_pool_06040DC8, r3
    jsr @r3
    mov.l r2, @r15
    mov r0, r4
    mov.l @r15, r3
    exts.w r4, r5
    and r3, r5
    tst r5, r5
    bt      .L_06040D5C
    bra     .L_06040D5E
    mov #0x1, r5
.L_06040D5C:
    mov #0x0, r5
.L_06040D5E:
    tst r5, r5
    bf      .L_06040D66
    bra     .L_06040DA4
    nop
.L_06040D66:
    mov.l   .L_pool_06040DCC, r4
    mov.l   .L_pool_06040DD0, r3
    jsr @r3
    nop
    add #0x1, r8
    mov.w   DAT_06040dc2, r2
    cmp/gt r2, r8
    bf      .L_06040D7A
    bra     .L_06040E5E
    mov #-0x2, r0
.L_06040D7A:
    mov r15, r4
    jsr @r11
    add #0x8, r4
    mov r15, r0
    add #0x8, r0
    mov.b @r0, r0
    extu.b r0, r0
    bra     .L_06040D94
    and #0xF, r0
.L_06040D8C:
    bra     .L_06040E5E
    mov #-0xA, r0
.L_06040D90:
    bra     .L_06040DA4
    mov r10, r9
.L_06040D94:
    cmp/eq #0x1, r0
    bt      .L_06040D90
    cmp/eq #0x2, r0
    bt      .L_06040D90
    cmp/eq #0x9, r0
    bt      .L_06040D8C
    cmp/eq #0xA, r0
    bt      .L_06040D8C
.L_06040DA4:
    tst r9, r9
    bt      .L_06040D44
    mov.l   .L_pool_06040DD4, r9
    mov.w   .L_wpool_06040DC4, r3
    mov.l @r9, r9
    add r3, r9
    mov.l   .L_pool_06040DD8, r3
    jsr @r3
    mov r9, r4
    mov r0, r4
    tst r4, r4
    bt      .L_06040DDC
    bra     .L_06040E5E
    mov #-0x2, r0

    .global DAT_06040dc0
DAT_06040dc0:
    .2byte  0x0400

    .global DAT_06040dc2
DAT_06040dc2:
    .2byte  0x0258
.L_wpool_06040DC4:
    .2byte  0x043C
    .2byte  0xFFFF
.L_pool_06040DC8:
    .4byte  sym_06035C4E
.L_pool_06040DCC:
    .4byte  0x0000FBFF
.L_pool_06040DD0:
    .4byte  smpc_cmd_helper_b
.L_pool_06040DD4:
    .4byte  sym_060A4D14
.L_pool_06040DD8:
    .4byte  track_intersect_test
.L_06040DDC:
    mov r15, r5
    mov.l   .L_pool_06040E74, r3
    add #0x4, r5
    jsr @r3
    mov #0x0, r4
    mov r15, r5
    mov r15, r4
    mov.l   .L_pool_06040E74, r3
    add #0x4, r5
    add #0x4, r4
    mov.b @r4, r4
    jsr @r3
    extu.b r4, r4
    mov r15, r0
    mov.l   .L_pool_06040E78, r2
    add #0x4, r0
    mov.b @r0, r0
    extu.b r0, r0
    add #-0x1, r0
    shll2 r0
    mov.l @(r0, r9), r3
    and r2, r3
    tst r3, r3
    bf      .L_06040E10
    bra     .L_06040E5E
    mov #-0xF, r0
.L_06040E10:
    mov.w   DAT_06040e72, r4
    mov.l   .L_pool_06040E7C, r3
    jsr @r3
    mov r12, r5
    mov.l @r14, r2
    mov.l   .L_pool_06040E80, r3
    mov.l r3, @(60, r2)
    bra     .L_06040E32
    nop
.L_06040E22:
    mov.l @r14, r2
    mov.l @(60, r2), r3
    add #-0x1, r3
    tst r3, r3
    bf/s    .L_06040E32
    mov.l r3, @(60, r2)
    bra     .L_06040E5E
    mov #-0x2, r0
.L_06040E32:
    mov #0x40, r3
    mov.l r3, @r15
    mov.l   .L_pool_06040E84, r3
    jsr @r3
    nop
    mov r0, r5
    mov.l @r15, r3
    exts.w r5, r4
    and r3, r4
    tst r4, r4
    bt      .L_06040E4C
    bra     .L_06040E4E
    mov #0x1, r4
.L_06040E4C:
    mov #0x0, r4
.L_06040E4E:
    tst r4, r4
    bt      .L_06040E22
    mov.l @r14, r3
    mov.l r13, @(60, r3)
    mov.l @r14, r4
    jsr @r11
    add #0x40, r4
    mov r13, r0
.L_06040E5E:
    add #0x14, r15
    lds.l @r15+, pr
    mov.l @r15+, r8
    mov.l @r15+, r9
    mov.l @r15+, r10
    mov.l @r15+, r11
    mov.l @r15+, r12
    mov.l @r15+, r13
    rts
    mov.l @r15+, r14

    .global DAT_06040e72
DAT_06040e72:
    .2byte  0x00FC
.L_pool_06040E74:
    .4byte  mesh_boundary_check
.L_pool_06040E78:
    .4byte  0x40000000
.L_pool_06040E7C:
    .4byte  track_surface_type_a
.L_pool_06040E80:
    .4byte  0x00008000
.L_pool_06040E84:
    .4byte  sym_06035C4E

    .global sym_06040E88
sym_06040E88:
    mov #0x1, r1
    mov #0x18, r7
    mov.l   .L_pool_06040EE8, r6
    mov #0x0, r5
.L_06040E90:
    mov.l @r6, r3
    add #0x18, r3
    add r5, r3
    mov.b @r3, r2
    tst r2, r2
    bf      .L_06040EAA
    mov.l @r6, r3
    add #0x18, r3
    add r5, r3
    mov.b r1, @r3
    mov.l r5, @r4
    rts
    mov #0x0, r0
.L_06040EAA:
    add #0x1, r5
    cmp/ge r7, r5
    bf      .L_06040E90
    mov #-0x1, r2
    mov.l r2, @r4
    mov #-0x3, r0
    rts
    nop

    .global sym_06040EBA
sym_06040EBA:
    cmp/pz r4
    bf      .L_06040EC4
    mov #0x18, r2
    cmp/ge r2, r4
    bf      .L_06040EC8
.L_06040EC4:
    rts
    mov #-0x6, r0
.L_06040EC8:
    mov.l   .L_pool_06040EE8, r5
    mov.l @r5, r0
    add #0x18, r0
    mov.b @(r0, r4), r0
    cmp/eq #0x1, r0
    bt      .L_06040ED8
    rts
    mov #-0x7, r0
.L_06040ED8:
    mov.l @r5, r3
    add #0x18, r3
    add r3, r4
    mov #0x0, r2
    mov.b r2, @r4
    mov r2, r0
    rts
    nop
.L_pool_06040EE8:
    .4byte  sym_060A5400

    .global sym_06040EEC
sym_06040EEC:
    mov #0x1, r1
    mov #0x18, r7
    mov.l   .L_pool_06040F3C, r6
    mov #0x0, r5
.L_06040EF4:
    mov.l @r6, r0
    mov.b @(r0, r5), r3
    tst r3, r3
    bf      .L_06040F06
    mov.l @r6, r0
    mov.b r1, @(r0, r5)
    mov.l r5, @r4
    rts
    mov #0x0, r0
.L_06040F06:
    add #0x1, r5
    cmp/ge r7, r5
    bf      .L_06040EF4
    mov #-0x1, r3
    mov.l r3, @r4
    mov #-0x4, r0
    rts
    nop
    .2byte  0x0000
    .4byte  0x00000000

    .global event_queue_overflow
    .type event_queue_overflow, @function
event_queue_overflow:
    sts.l pr, @-r15
    mov.l   .L_pool_06040F3C, r13
    cmp/pz r14
    bf      .L_06040F2A
    mov #0x18, r2
    cmp/ge r2, r14
    bf      .L_06040F2E
.L_06040F2A:
    bra     .L_06040F7A
    mov #-0x6, r0
.L_06040F2E:
    mov.l @r13, r0
    mov.b @(r0, r14), r0
    cmp/eq #0x1, r0
    bt      .L_06040F40
    bra     .L_06040F7A
    mov #-0x7, r0
    .2byte  0xFFFF
.L_pool_06040F3C:
    .4byte  sym_060A5400
.L_06040F40:
    mov.l   .L_pool_06040FA8, r6
    mov #0x0, r5
    .byte   0xB1, 0xB5    /* bsr 0x060412B2 (external) */
    mov r14, r4
    mov.l   .L_pool_06040FAC, r4
    mov.l @r13, r2
    mov.l r4, @(60, r2)
.L_06040F4E:
    .byte   0xB3, 0xA3    /* bsr 0x06041698 (external) */
    nop
    cmp/eq #0x3, r0
    bf/s    .L_06040F5C
    mov r0, r4
    bra     .L_06040F7A
    mov #-0xC, r0
.L_06040F5C:
    .byte   0xB1, 0xD8    /* bsr 0x06041310 (external) */
    mov r14, r4
    cmp/eq #0x1, r0
    bf      .L_06040F68
    bra     .L_06040F6C
    nop
.L_06040F68:
    bra     .L_06040F4E
    nop
.L_06040F6C:
    mov #0x0, r4
    mov r4, r5
    mov.l @r13, r2
    mov.l r4, @(60, r2)
    mov.l @r13, r0
    mov.b r5, @(r0, r14)
    mov r5, r0
.L_06040F7A:
    lds.l @r15+, pr
    mov.l @r15+, r13
    rts
    mov.l @r15+, r14

    .global evt_boundary_check
    .type evt_boundary_check, @function
evt_boundary_check:
    sts.l pr, @-r15
    add #-0x4, r15
    mov r15, r5
    mov.l   .L_pool_06040FB0, r3
    jsr @r3
    mov #0x0, r4
    mov r15, r5
    mov r15, r4
    mov.l   .L_pool_06040FB0, r3
    mov.b @r4, r4
    jsr @r3
    extu.b r4, r4
    mov r15, r0
    mov.l   .L_pool_06040FB4, r3
    mov.l @r0, r0
    add #0x4, r15
    lds.l @r15+, pr
    rts
    and r3, r0
.L_pool_06040FA8:
    .4byte  0x0000FFFF
.L_pool_06040FAC:
    .4byte  0x00008000
.L_pool_06040FB0:
    .4byte  mesh_boundary_check
.L_pool_06040FB4:
    .4byte  0x00FFFFFF

    .global sym_06040FB8
sym_06040FB8:
    mov.l   .L_pool_06041010, r4
    mov.l @r4, r0
    mov.l @(48, r0), r0
    cmp/eq #0x1, r0
    bf      .L_06040FC6
    rts
    mov #-0x5, r0
.L_06040FC6:
    mov #0x1, r3
    mov.l @r4, r2
    mov.l r3, @(48, r2)
    mov.l @r4, r2
    mov.l @(56, r2), r3
    add #0x1, r3
    mov.l r3, @(56, r2)
    mov.l @r4, r2
    mov.l @(56, r2), r3
    cmp/pz r3
    bt      .L_06040FE2
    mov.l @r4, r3
    mov #0x0, r2
    mov.l r2, @(56, r3)
.L_06040FE2:
    mov.l @r4, r0
    mov.l @(56, r0), r0
    rts
    nop

    .global sym_06040FEA
sym_06040FEA:
    mov.l   .L_pool_06041010, r5
    mov.l @r5, r3
    mov.l @(48, r3), r0
    tst r0, r0
    bf      .L_06040FF8
    rts
    mov #-0x7, r0
.L_06040FF8:
    mov.l @r5, r3
    mov.l @(56, r3), r2
    cmp/eq r4, r2
    bt      .L_06041004
    rts
    mov #-0x9, r0
.L_06041004:
    mov #0x0, r4
    mov.l @r5, r2
    mov.l r4, @(48, r2)
    mov r4, r0
    rts
    nop
.L_pool_06041010:
    .4byte  sym_060A5400

    .global sym_06041014
sym_06041014:
    mov.l   .L_pool_0604105C, r5
    mov.l @r5, r3
    mov.l @(48, r3), r0
    tst r0, r0
    bf      .L_06041022
    rts
    mov #0x0, r0
.L_06041022:
    mov.l @r5, r0
    mov.l @(56, r0), r3
    cmp/eq r4, r3
    bf      .L_0604102E
    bra     .L_06041030
    mov #0x1, r0
.L_0604102E:
    mov #0x0, r0
.L_06041030:
    rts
    nop

    .global buffer_slot_alloc
    .type buffer_slot_alloc, @function
buffer_slot_alloc:
    mov.l r14, @-r15
    mov #0x54, r0
    mov.l r13, @-r15
    sts.l pr, @-r15
    add #-0x4, r15
    mov.l   .L_pool_0604105C, r14
    mov.l @r14, r1
    mov.l @(r0, r1), r1
    mov.l @r14, r0
    add #0x18, r0
    mov.b @(r0, r4), r0
    cmp/eq #0x1, r0
    bt      .L_06041052
    bra     .L_060410C0
    mov #-0x7, r0
.L_06041052:
    mov #0x18, r2
    cmp/ge r2, r1
    bf      .L_06041060
    bra     .L_060410C0
    mov #-0x8, r0
.L_pool_0604105C:
    .4byte  sym_060A5400
.L_06041060:
    mov.l @r14, r2
    mov #0x58, r0
    mov.l @(r0, r2), r0
    tst r0, r0
    bf      .L_06041072
    mov.l @r14, r3
    mov #0x1, r2
    mov #0x58, r0
    mov.l r2, @(r0, r3)
.L_06041072:
    mov r1, r13
    exts.b r4, r4
    exts.b r5, r5
    mov.l @r14, r2
    shll2 r13
    mov r5, r0
    add #0x5C, r2
    shll2 r13
    add r13, r2
    mov.b r4, @r2
    mov.l @r14, r2
    add #0x5C, r2
    add r13, r2
    mov.b r0, @(1, r2)
    mov r6, r2
    mov.l   .L_pool_060410FC, r3
    mov.l @r14, r1
    add #0x5C, r1
    add r13, r1
    add #0x2, r1
    jsr @r3
    mov #0x6, r0
    mov #0x54, r0
    mov.l @r14, r3
    add #0x5C, r3
    add r13, r3
    mov.l r7, @(8, r3)
    mov.l @r14, r3
    mov.l @(16, r15), r2
    add #0x5C, r3
    add r3, r13
    mov.l r2, @(12, r13)
    mov.l @r14, r3
    mov.l @(r0, r3), r2
    add #0x1, r2
    mov.l r2, @(r0, r3)
    .byte   0xB4, 0x00    /* bsr 0x060418BE (external) */
    mov r15, r4
    mov #0x0, r0
.L_060410C0:
    add #0x4, r15
    lds.l @r15+, pr
    mov.l @r15+, r13
    rts
    mov.l @r15+, r14

    .global vblank_int_ext
    .type vblank_int_ext, @function
vblank_int_ext:
    sts.l pr, @-r15
    add #-0x14, r15
    mov.l r4, @r15
    mov.l r6, @(4, r15)
    mov.l   .L_pool_06041100, r3
    jsr @r3
    mov.l @r15, r4
    mov r0, r4
    tst r4, r4
    bt      .L_060410E6
    add #0x14, r15
    lds.l @r15+, pr
    rts
    mov #-0xA, r0
.L_060410E6:
    mov.l @(4, r15), r5
    mov.l   .L_pool_06041104, r3
    jsr @r3
    mov.l @r15, r4
    mov r0, r4
    tst r4, r4
    bt      .L_06041108
    add #0x14, r15
    lds.l @r15+, pr
    rts
    mov #-0xA, r0
.L_pool_060410FC:
    .4byte  sym_06035228
.L_pool_06041100:
    .4byte  track_road_edge_b
.L_pool_06041104:
    .4byte  track_road_width_stub
.L_06041108:
    mov r15, r4
    mov.l   .L_pool_06041178, r3
    jsr @r3
    add #0x8, r4
    mov.l   .L_pool_0604117C, r2
    mov.l @r2, r2
    mov r15, r3
    add #0x8, r3
    mov.b @r3, r1
    mov #0x40, r0
    mov.b r1, @(r0, r2)
    mov #0x0, r0
    add #0x14, r15
    lds.l @r15+, pr
    rts
    nop

    .global queue_validator
    .type queue_validator, @function
queue_validator:
    sts.l pr, @-r15
    add #-0x4, r15
    mov.w   DAT_06041174, r3
    cmp/eq r3, r4
    bt      .L_06041146
    mov.l   .L_pool_0604117C, r0
    mov.l @r0, r0
    add #0x18, r0
    mov.b @(r0, r4), r0
    cmp/eq #0x1, r0
    bt      .L_06041146
    add #0x4, r15
    lds.l @r15+, pr
    rts
    mov #-0x7, r0
.L_06041146:
    mov.l   .L_pool_0604117C, r6
    mov.l @r6, r2
    mov.l @(56, r2), r3
    cmp/eq r5, r3
    bt      .L_06041158
    add #0x4, r15
    lds.l @r15+, pr
    rts
    mov #-0x9, r0
.L_06041158:
    mov.l @r6, r3
    mov #0x1, r2
    mov.w   .L_wpool_06041176, r0
    mov.l r2, @(r0, r3)
    mov.l @r6, r3
    add #0x4, r0
    mov.l r4, @(r0, r3)
    .byte   0xB4, 0x9B    /* bsr 0x06041AA0 (external) */
    mov r15, r4
    mov #0x0, r0
    add #0x4, r15
    lds.l @r15+, pr
    rts
    nop

    .global DAT_06041174
DAT_06041174:
    .2byte  0x00FF
.L_wpool_06041176:
    .2byte  0x0304
.L_pool_06041178:
    .4byte  ai_checkpoint_validate
.L_pool_0604117C:
    .4byte  sym_060A5400
