/* camera_orient_calc -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x060053AC - 0x06005788
 * Auto-generated by tools/generate_l3_tu.py
 */

    .section .text.FUN_060053AC


    .global camera_orient_calc
    .type camera_orient_calc, @function
camera_orient_calc:
    mov.l r14, @-r15
    mov r4, r14
    mov.l r13, @-r15
    mov r5, r13
    mov.l r12, @-r15
    mov.l r11, @-r15
    sts.l pr, @-r15
    add #-0x10, r15
    mov.l   .L_sym_06026E0C, r3
    jsr @r3
    mov r6, r12
    mov.l   .L_sym_06089EDC, r4
    mov.l @r4, r4
    mov.l r12, @(44, r4)
    mov.l   .L_sym_06078663, r0
    mov.b @r0, r0
    tst r0, r0
    bt      .L_060053DA
    mov.l   .L_fp_one, r6
    mov.l   .L_mask_upper_word, r4
    mov.l   .L_mat_scale_columns, r3
    jsr @r3
    mov r6, r5
.L_060053DA:
    mov.l @r13, r4
    mov.l   .L_transform_matrix, r3
    jsr @r3
    neg r4, r4
    mov.l @(8, r13), r4
    mov.l   .L_mat_rot_z, r3
    jsr @r3
    neg r4, r4
    mov.l @(4, r13), r4
    mov.l   .L_mat_rot_y, r3
    jsr @r3
    neg r4, r4
    mov.l @(8, r14), r6
    mov.l @(4, r14), r5
    mov.l @r14, r4
    mov.l   .L_sym_06026E2E, r3
    neg r6, r6
    neg r5, r5
    jsr @r3
    neg r4, r4
    mov r15, r6
    mov r15, r5
    mov.l   .L_sincos_pair, r3
    add #0xC, r5
    jsr @r3
    mov.l @r13, r4
    mov r15, r6
    mov r15, r5
    mov.l   .L_sincos_pair, r3
    add #0x8, r6
    add #0x4, r5
    jsr @r3
    mov.l @(4, r13), r4
    mov.l   .L_sym_06063DF8, r11
    mov.l   .L_fpmul, r13
    mov.l @(4, r15), r5
    jsr @r13
    mov.l @r15, r4
    mov r0, r5
    jsr @r13
    mov r12, r4
    mov.l @r14, r3
    add r3, r0
    mov.l r0, @r11
    mov.l @(12, r15), r5
    jsr @r13
    mov r12, r4
    mov.l @(4, r14), r3
    sub r0, r3
    mov.l r3, @(4, r11)
    mov.l @(8, r15), r5
    jsr @r13
    mov.l @r15, r4
    mov r0, r5
    jsr @r13
    mov r12, r4
    mov.l @(8, r14), r3
    sub r0, r3
    mov.l r3, @(8, r11)
    add #0x10, r15
    lds.l @r15+, pr
    mov.l @r15+, r11
    mov.l @r15+, r12
    mov.l @r15+, r13
    rts
    mov.l @r15+, r14
    .2byte  0xFFFF
.L_sym_06026E0C:
    .4byte  sym_06026E0C
.L_sym_06089EDC:
    .4byte  sym_06089EDC
.L_sym_06078663:
    .4byte  sym_06078663
.L_fp_one:
    .4byte  0x00010000
.L_mask_upper_word:
    .4byte  0xFFFF0000
.L_mat_scale_columns:
    .4byte  mat_scale_columns
.L_transform_matrix:
    .4byte  transform_matrix
.L_mat_rot_z:
    .4byte  mat_rot_z
.L_mat_rot_y:
    .4byte  mat_rot_y
.L_sym_06026E2E:
    .4byte  sym_06026E2E
.L_sincos_pair:
    .4byte  sincos_pair
.L_sym_06063DF8:
    .4byte  sym_06063DF8
.L_fpmul:
    .4byte  fpmul
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
    .4byte  0x00000000
.L_0600553C:
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */
    .word 0x0000 /* UNKNOWN */

    .global perspective_project
    .type perspective_project, @function
perspective_project:
    mov.l r14, @-r15
    mov.l r13, @-r15
    mov.l r12, @-r15
    mov.l r11, @-r15
    mov.l r10, @-r15
    mov.l r9, @-r15
    mov.l r8, @-r15
    sts.l pr, @-r15
    add #-0x34, r15
    mov.l   .L_sym_06063EEC, r9
    mov.l   .L_sym_06063E08, r10
    mov.l   .L_sym_06063E04, r13
    mov.w @r10, r3
    mov.l @r13, r13
    extu.w r3, r3
    mov r13, r14
    add #0x20, r14
    mov.w @r14, r2
    cmp/ge r2, r3
    bf      .L_060055FE
    mov.w @r14, r0
    cmp/eq #-0x1, r0
    bf      .L_060055EC
    mov.l @(4, r14), r14
.L_060055EC:
    mov r14, r13
    mov.l   .L_sym_06063E04, r3
    mov.l r13, @r3
    mov.w @r13, r2
    tst r2, r2
    bf/s    .L_060055FE
    add #0x20, r14
    mov #0x0, r3
    mov.w r3, @r10
.L_060055FE:
    mov.w @r14, r5
    mov.w @r13, r3
    mov.l r3, @r15
    sub r3, r5
    mov.w @r10, r4
    mov.l   .L_fpdiv_setup, r2
    shll16 r5
    extu.w r4, r4
    sub r3, r4
    jsr @r2
    shll16 r4
    mov r0, r12
    mov #0x0, r5
    mov r13, r4
    bsr     .L_0600553C
    add #0x2, r4
    mov r15, r5
    mov r13, r4
    mov.l   .L_mat_vec_transform, r8
    add #0x28, r5
    jsr @r8
    add #0x8, r4
    mov r13, r5
    mov r14, r4
    add #0x2, r5
    bsr     .L_0600553C
    add #0x2, r4
    mov r15, r5
    mov r14, r4
    add #0x1C, r5
    jsr @r8
    add #0x8, r4
    mov r12, r5
    mov.l   .L_fpmul_2, r11
    mov.l @(40, r15), r2
    mov.l r2, @r15
    mov r2, r3
    mov.l @(28, r15), r4
    jsr @r11
    sub r3, r4
    mov r12, r5
    mov.l @r15, r3
    add r3, r0
    mov.l r0, @(16, r15)
    mov.l @(44, r15), r3
    mov.l r3, @r15
    mov.l @(32, r15), r4
    jsr @r11
    sub r3, r4
    mov.l @r15, r3
    mov r12, r5
    add r3, r0
    mov.l r0, @(20, r15)
    mov.l @(48, r15), r3
    mov.l r3, @r15
    mov.l @(36, r15), r4
    jsr @r11
    sub r3, r4
    mov r14, r5
    mov r13, r4
    mov.l @r15, r3
    add #0x2, r5
    add r3, r0
    mov.l r0, @(24, r15)
    bsr     .L_0600553C
    add #0x3, r4
    mov r15, r5
    mov r13, r4
    add #0x28, r5
    jsr @r8
    add #0x14, r4
    mov r13, r5
    add #0x3, r5
    mov r14, r4
    bra     .L_060056B0
    add #0x3, r4
    .2byte  0xFFFF
.L_sym_06063EEC:
    .4byte  sym_06063EEC
.L_sym_06063E08:
    .4byte  sym_06063E08
.L_sym_06063E04:
    .4byte  sym_06063E04
.L_fpdiv_setup:
    .4byte  fpdiv_setup
.L_mat_vec_transform:
    .4byte  mat_vec_transform
.L_fpmul_2:
    .4byte  fpmul
.L_060056B0:
    bsr     .L_0600553C
    nop
    mov r15, r5
    mov r14, r4
    add #0x1C, r5
    jsr @r8
    add #0x14, r4
    mov r12, r5
    mov.l @(40, r15), r2
    mov.l r2, @r15
    mov r2, r3
    mov.l @(28, r15), r4
    jsr @r11
    sub r3, r4
    mov.l @r15, r3
    mov r12, r5
    add r3, r0
    mov.l r0, @(4, r15)
    mov.l @(44, r15), r3
    mov.l r3, @r15
    mov.l @(32, r15), r4
    jsr @r11
    sub r3, r4
    mov r12, r5
    mov.l @r15, r3
    add r3, r0
    mov.l r0, @(8, r15)
    mov.l @(48, r15), r3
    mov.l r3, @r15
    mov.l @(36, r15), r4
    jsr @r11
    sub r3, r4
    mov.l @r15, r3
    add r3, r0
    mov.l r0, @(12, r15)
    mov.w @r10, r3
    add #0x1, r3
    mov.w r3, @r10
    mov.l   .L_sym_06026E0C_2, r3
    jsr @r3
    nop
    mov r15, r5
    mov r15, r4
    mov.l   .L_sym_06063EEC_2, r6
    add #0x4, r5
    .byte   0xBD, 0xC3    /* bsr 0x06005294 (external) */
    add #0x10, r4
    mov.l   .L_sym_06078663_2, r0
    mov.b @r0, r0
    tst r0, r0
    bt      .L_06005724
    mov.l @(4, r9), r14
    shll8 r14
    shll2 r14
    mov.l   .L_fp_416, r3
    add r3, r14
    bra     .L_06005730
    nop
.L_06005724:
    mov.l @(4, r9), r14
    shll8 r14
    shll2 r14
    neg r14, r14
    mov.l   .L_pool_06005774, r3
    add r3, r14
.L_06005730:
    mov.l   .L_sym_0603850C, r3
    jsr @r3
    mov #0x4, r4
    mov #0x0, r6
    mov.l @r9, r5
    mov.l   .L_fp_58, r3
    shll8 r5
    shll r5
    neg r5, r5
    add r3, r5
    mov.l   .L_scene_data_write_abs, r3
    jsr @r3
    mov r14, r4
    mov.l   .L_sym_06038520, r3
    jsr @r3
    nop
    add #0x34, r15
    lds.l @r15+, pr
    mov.l @r15+, r8
    mov.l @r15+, r9
    mov.l @r15+, r10
    mov.l @r15+, r11
    mov.l @r15+, r12
    mov.l @r15+, r13
    rts
    mov.l @r15+, r14
.L_sym_06026E0C_2:
    .4byte  sym_06026E0C
.L_sym_06063EEC_2:
    .4byte  sym_06063EEC
.L_sym_06078663_2:
    .4byte  sym_06078663
.L_fp_416:
    .4byte  0x01A00000
.L_pool_06005774:
    .4byte  0xFFA00000
.L_sym_0603850C:
    .4byte  sym_0603850C
.L_fp_58:
    .4byte  0x003A0000
.L_scene_data_write_abs:
    .4byte  scene_data_write_abs
.L_sym_06038520:
    .4byte  sym_06038520
