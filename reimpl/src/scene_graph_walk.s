/* scene_graph_walk -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x0602B9EC - 0x0602BDCC
 * Auto-generated by tools/generate_l3_tu.py
 */

    .section .text.FUN_0602B9EC


    .global scene_graph_walk
    .type scene_graph_walk, @function
scene_graph_walk:
    mov.l r14, @-r15
    sts.l pr, @-r15
    mov r4, r8
    mov r5, r14
    mov r6, r13
    mov.l   .L_pool_0602BA88, r12
    mov #0x40, r4
    mov #-0x1, r0
.L_0602B9FC:
    mov.l r0, @r12
    dt r4
    bf/s    .L_0602B9FC
    add #0x10, r12
    mov.l   .L_pool_0602BA8C, r10
    mov.l @r10, r10
    mov #0x18, r0
    mul.l r7, r0
    sts macl, r0
    add r0, r8
.L_0602BA10:
    mov.l r7, @-r15
    add #-0x18, r8
    mov.l   .L_pool_0602BA90, r11
    mov.l   .L_pool_0602BA94, r5
    mov.l   .L_pool_0602BA98, r0
    mov.l @r0, r6
    mov.w @(16, r8), r0
    extu.w r0, r4
    bsr     vdp1_cmd_emit
    mov #0x6, r9
    mov.l r1, @r5
    mov.l r2, @(4, r5)
    mov.l r3, @(8, r5)
    mov.l   .L_pool_0602BA9C, r7
    mov.l r2, @r7
    mov.w @(12, r8), r0
    tst #0x8, r0
    bf      .L_0602BAA4
    mov.l   .L_pool_0602BAA0, r7
    mov r8, r4
    clrmac
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    add #-0xC, r4
    sts mach, r0
    sts macl, r9
    clrmac
    mac.l @r4+, @r6+
    xtrct r0, r9
    mov.l r9, @r7
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    add #-0xC, r4
    sts mach, r0
    sts macl, r9
    clrmac
    mac.l @r4+, @r6+
    xtrct r0, r9
    mov.l r9, @(4, r7)
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    add #-0x24, r6
    sts mach, r0
    sts macl, r9
    xtrct r0, r9
    mov.l r9, @(8, r7)
    clrmac
    mac.l @r5+, @r7+
    mac.l @r5+, @r7+
    mac.l @r5+, @r7+
    add #-0xC, r5
    sts mach, r9
    sts macl, r0
    xtrct r9, r0
    cmp/pl r0
    bt      .L_0602BAA4
    bra     .L_0602BC42
    nop
    .2byte  0x0000
.L_pool_0602BA88:
    .4byte  sym_06094AE4
.L_pool_0602BA8C:
    .4byte  sym_06063F08
.L_pool_0602BA90:
    .4byte  sym_0602BD6C
.L_pool_0602BA94:
    .4byte  sym_0602BD8C
.L_pool_0602BA98:
    .4byte  sym_0608A52C
.L_pool_0602BA9C:
    .4byte  sym_0602BDB4
.L_pool_0602BAA0:
    .4byte  sym_0602BD9C
.L_0602BAA4:
    mov.w @(16, r8), r0
    mov.l   .L_pool_0602BB28, r7
    bsr     .L_0602BD3C
    mov r0, r4
    mov.l r3, @r5
    add #0x4, r5
    mov.w @(16, r8), r0
    bsr     .L_0602BCFC
    nop

    .global sym_0602BAB6
sym_0602BAB6:
    mov.w @(18, r8), r0
    mov.l   .L_pool_0602BB2C, r7
    bsr     .L_0602BD3C
    mov r0, r4
    bsr     vdp1_cmd_emit
    mov #0x6, r9
    mov.l r3, @r5
    add #0x4, r5
    mov.w @(18, r8), r0
    bsr     .L_0602BCFC
    nop

    .global sym_0602BACC
sym_0602BACC:
    mov.w @(20, r8), r0
    mov.l   .L_pool_0602BB30, r7
    bsr     .L_0602BD3C
    mov r0, r4
    bsr     vdp1_cmd_emit
    mov #0x6, r9
    mov.l r3, @r5
    add #0x4, r5
    mov.w @(20, r8), r0
    bsr     .L_0602BCFC
    nop

    .global sym_0602BAE2
sym_0602BAE2:
    mov.w @(22, r8), r0
    mov.l   .L_pool_0602BB34, r7
    bsr     .L_0602BD3C
    mov r0, r4
    bsr     vdp1_cmd_emit
    mov #0x6, r9
    mov.l r3, @r5
    add #0x4, r5
    mov.w @(22, r8), r0
    bsr     .L_0602BCFC
    nop

    .global sym_0602BAF8
sym_0602BAF8:
    mov.l   .L_pool_0602BB38, r0
    mov #0x18, r1
    mov.l @r0, r0
    mulu.w r0, r1
    mov.l   .L_pool_0602BB3C, r2
    sts macl, r9
    add r2, r9
    add #-0x20, r11
    mov.w   DAT_0602bb26, r12
    mov.l @(0, r11), r0
    mov.l @(8, r11), r2
    mov.l @(16, r11), r4
    mov.l @(24, r11), r6
    cmp/gt r0, r12
    bf      .L_0602BB40
    cmp/gt r2, r12
    bf      .L_0602BB40
    cmp/gt r4, r12
    bf      .L_0602BB40
    cmp/gt r6, r12
    bf      .L_0602BB40
    bra     .L_0602BC42
    nop

    .global DAT_0602bb26
DAT_0602bb26:
    .2byte  0xFF50
.L_pool_0602BB28:
    .4byte  sym_0602BAB6
.L_pool_0602BB2C:
    .4byte  sym_0602BACC
.L_pool_0602BB30:
    .4byte  sym_0602BAE2
.L_pool_0602BB34:
    .4byte  sym_0602BAF8
.L_pool_0602BB38:
    .4byte  sym_060620D4
.L_pool_0602BB3C:
    .4byte  sym_0608AC20
.L_0602BB40:
    mov.w   DAT_0602bbba, r12
    cmp/gt r0, r12
    bt      .L_0602BB52
    cmp/gt r2, r12
    bt      .L_0602BB52
    cmp/gt r4, r12
    bt      .L_0602BB52
    cmp/gt r6, r12
    bt      .L_0602BC42
.L_0602BB52:
    mov.w   DAT_0602bbbc, r12
    mov.l @(4, r11), r1
    mov.l @(12, r11), r3
    mov.l @(20, r11), r5
    mov.l @(28, r11), r7
    cmp/gt r1, r12
    bf      .L_0602BB6C
    cmp/gt r3, r12
    bf      .L_0602BB6C
    cmp/gt r5, r12
    bf      .L_0602BB6C
    cmp/gt r7, r12
    bt      .L_0602BC42
.L_0602BB6C:
    mov.w   DAT_0602bbbe, r12
    cmp/gt r1, r12
    bt      .L_0602BB7E
    cmp/gt r3, r12
    bt      .L_0602BB7E
    cmp/gt r5, r12
    bt      .L_0602BB7E
    cmp/gt r7, r12
    bf      .L_0602BC42
.L_0602BB7E:
    mov r9, r12
    add #0x18, r12
    mov.w r7, @-r12
    mov.w r6, @-r12
    mov.w r5, @-r12
    mov.w r4, @-r12
    mov.w r3, @-r12
    mov.w r2, @-r12
    mov.w r1, @-r12
    mov.w r0, @-r12
    mov.w @(14, r8), r0
    mov.w r0, @(6, r9)
    mov.w @(12, r8), r0
    shlr2 r0
    shlr2 r0
    and #0xF, r0
    mov.b r0, @(4, r9)
    mov r13, r0
    mov.b r0, @(5, r9)
    mov.w @(12, r8), r0
    mov.l   .L_pool_0602BBC0, r1
    and #0x7, r0
    shll2 r0
    mov.l @(r0, r1), r2
    .word 0xC777 /* UNKNOWN */
    mov.l @r0, r3
    mov.l @(4, r0), r4
    mov.l @(8, r0), r5
    jmp @r2
    mov.l @(12, r0), r6

    .global DAT_0602bbba
DAT_0602bbba:
    .2byte  0x00B0

    .global DAT_0602bbbc
DAT_0602bbbc:
    .2byte  0xFF81

    .global DAT_0602bbbe
DAT_0602bbbe:
    .2byte  0x0051
.L_pool_0602BBC0:
    .4byte  sym_0602BDB8

    .global loc_0602BBC4
loc_0602BBC4:
    add r4, r3
    add r5, r6
    add r6, r3
    bra     .L_0602BC16
    shlr2 r3

    .global loc_0602BBCE
loc_0602BBCE:
    cmp/ge r3, r4
    bt      .L_0602BBD4
    mov r4, r3
.L_0602BBD4:
    cmp/ge r3, r5
    bt      .L_0602BBDA
    mov r5, r3
.L_0602BBDA:
    cmp/ge r3, r6
    bt      .L_0602BBE0
    mov r6, r3
.L_0602BBE0:
    bra     .L_0602BC16
    nop

    .global loc_0602BBE4
loc_0602BBE4:
    cmp/gt r3, r4
    bf      .L_0602BBEA
    mov r4, r3
.L_0602BBEA:
    cmp/gt r3, r5
    bf      .L_0602BBF0
    mov r5, r3
.L_0602BBF0:
    cmp/gt r3, r6
    bf      .L_0602BBF6
    mov r6, r3
.L_0602BBF6:
    bra     .L_0602BC16
    nop

    .global loc_0602BBFA
loc_0602BBFA:
    mov #0x1, r0
    bra     .L_0602BC02
    shll16 r0

    .global loc_0602BC00
loc_0602BC00:
    mov.l   .L_pool_0602BC4C, r0
.L_0602BC02:
    cmp/gt r3, r4
    bf      .L_0602BC08
    mov r4, r3
.L_0602BC08:
    cmp/gt r3, r5
    bf      .L_0602BC0E
    mov r5, r3
.L_0602BC0E:
    cmp/gt r3, r6
    bf      .L_0602BC14
    mov r6, r3
.L_0602BC14:
    add r0, r3
.L_0602BC16:
    mov.l   .L_pool_0602BC50, r1
    mov.l @r1, r1
    mov.l   .L_pool_0602BC54, r0
    mov.l @r0, r0
    mov.l   .L_fp_two, r2
    add r2, r1
    cmp/gt r1, r0
    bf      .L_0602BC2A
    mov.l   .L_pool_0602BC5C, r2
    add r2, r3
.L_0602BC2A:
    mov.l   .L_pool_0602BC60, r2
    neg r3, r3
    mov.l   .L_pool_0602BC64, r1
    shlr8 r3
    mov.l @r2, r0
    shlr2 r3
    shlr2 r3
    shll r0
    mov.w r3, @(r0, r1)
    shar r0
    add #0x1, r0
    mov.l r0, @r2
.L_0602BC42:
    mov.l @r15+, r7
    dt r7
    bt      .L_0602BC68
    bra     .L_0602BA10
    nop
.L_pool_0602BC4C:
    .4byte  0x000B8000
.L_pool_0602BC50:
    .4byte  sym_0602BDB4
.L_pool_0602BC54:
    .4byte  sym_06063F54
.L_fp_two:
    .4byte  0x00020000                  /* 2.0 (16.16 fixed-point) */
.L_pool_0602BC5C:
    .4byte  0x000A0000
.L_pool_0602BC60:
    .4byte  sym_060620D4
.L_pool_0602BC64:
    .4byte  sym_0606A4F8
.L_0602BC68:
    lds.l @r15+, pr
    mov.l @r15+, r14
    mov.l @r15+, r13
    mov.l @r15+, r12
    mov.l @r15+, r11
    mov.l @r15+, r10
    mov.l @r15+, r9
    rts
    mov.l @r15+, r8

    .global vdp1_cmd_emit
    .type vdp1_cmd_emit, @function
vdp1_cmd_emit:
    mul.l r9, r4
    mov.l   .L_pool_0602BCF8, r4
    sts macl, r0
    add r14, r0
    mov.w @r0+, r1
    mov.w @r0+, r2
    mov.w @r0+, r3
    shll8 r1
    shll2 r1
    shll r1
    mov.l r1, @r4
    shll8 r2
    shll2 r2
    shll r2
    mov.l r2, @(4, r4)
    shll8 r3
    shll2 r3
    shll r3
    mov.l r3, @(8, r4)
    mov #0x18, r7
    add r6, r7
    clrmac
    mac.l @r4+, @r7+
    mac.l @r4+, @r7+
    mac.l @r4+, @r7+
    add #-0xC, r4
    mov.l @(8, r7), r9
    sts mach, r0
    sts macl, r3
    xtrct r0, r3
    add r9, r3
    cmp/gt r10, r3
    bf      .L_0602BC42
    mov.w   .L_wpool_0602BCF2, r9
    mov.w   .L_wpool_0602BCF4, r0
    mov.l r0, @(16, r9)
    mov.l r3, @(0, r9)
    mov #0x0, r0
    mov.l r0, @(20, r9)
    clrmac
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    add #-0xC, r4
    mov.l @r7+, r9
    sts mach, r0
    sts macl, r1
    clrmac
    mac.l @r4+, @r6+
    xtrct r0, r1
    add r9, r1
    mac.l @r4+, @r6+
    mac.l @r4+, @r6+
    mov.l @r7+, r9
    sts mach, r0
    sts macl, r2
    xtrct r0, r2
    add r9, r2
    rts
    add #-0x18, r6
.L_wpool_0602BCF2:
    .2byte  0xFF00
.L_wpool_0602BCF4:
    .2byte  0x00A0
    .2byte  0x0000
.L_pool_0602BCF8:
    .4byte  sym_0602BDA8
.L_0602BCFC:
    mov.w   .L_wpool_0602BD34, r9
    mov.l @(28, r9), r7
    dmuls.l r1, r7
    neg r2, r2
    sts mach, r1
    dmuls.l r2, r7
    mov.l r1, @r11
    sts mach, r2
    mov.l r2, @(4, r11)
    add #0x8, r11
    mov.w   DAT_0602bd36, r7
    cmp/gt r7, r1
    bt      .L_0602BC42
    mov.w   DAT_0602bd38, r7
    cmp/gt r1, r7
    bt      .L_0602BC42
    mov.w   DAT_0602bd3a, r7
    cmp/gt r7, r2
    bt      .L_0602BC42
    mov.w   DAT_0602bd38, r7
    cmp/gt r2, r7
    bt      .L_0602BC42
    mov.l r0, @r12
    mov.l r1, @(4, r12)
    mov.l r2, @(8, r12)
    mov.l r3, @(12, r12)
    rts
    nop
.L_wpool_0602BD34:
    .2byte  0xFF00

    .global DAT_0602bd36
DAT_0602bd36:
    .2byte  0x0190

    .global DAT_0602bd38
DAT_0602bd38:
    .2byte  0xFE70

    .global DAT_0602bd3a
DAT_0602bd3a:
    .2byte  0x00C8
.L_0602BD3C:
    and #0x3F, r0
    mov.l   .L_pool_0602BD64, r12
    shll2 r0
    shll2 r0
    add r0, r12
    mov.l @r12, r0
    cmp/pz r0
    bf      .L_0602BD68
    cmp/eq r0, r4
    bf      .L_0602BD68
    mov.l @(4, r12), r1
    mov.l @(8, r12), r2
    mov.l @(12, r12), r3
    mov.l r1, @r11
    mov.l r2, @(4, r11)
    add #0x8, r11
    mov.l r3, @r5
    jmp @r7
    add #0x4, r5
    .2byte  0x0000
.L_pool_0602BD64:
    .4byte  sym_06094AE4
.L_0602BD68:
    rts
    nop

    .global sym_0602BD6C
sym_0602BD6C:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global sym_0602BD8C
sym_0602BD8C:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global DAT_0602bd90
DAT_0602bd90:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global DAT_0602bd94
DAT_0602bd94:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global DAT_0602bd98
DAT_0602bd98:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global sym_0602BD9C
sym_0602BD9C:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global sym_0602BDA8
sym_0602BDA8:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global sym_0602BDB4
sym_0602BDB4:
    .word 0xFFFF /* UNKNOWN */
    .word 0xFFFF /* UNKNOWN */

    .global sym_0602BDB8
sym_0602BDB8:
    .4byte  loc_0602BBC4
    .4byte  loc_0602BBCE
    .4byte  loc_0602BBE4
    .4byte  loc_0602BBFA
    .4byte  loc_0602BC00
