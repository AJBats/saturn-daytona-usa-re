/* seg_data_loader -- L3 assembly (SH-2 mnemonics)
 * Translation unit: 0x06036172 - 0x060361B8
 * Auto-generated by tools/generate_l3_tu.py
 */

    .section .text.FUN_06036172


    .global seg_data_loader
    .type seg_data_loader, @function
seg_data_loader:
    mov.l r14, @-r15        ! save r14
    sts.l pr, @-r15         ! save return address
    mov r4, r14             ! r14 = output_ptr (caller's struct)
    add #-0x10, r15         ! allocate 16-byte local buffer on stack
    mov r15, r4             ! r4 = &local_buf
    .byte   0xD3, 0x0B    /* mov.l .L_pool_analog_fn, r3 */  ! r3 = input_proc_analog
    jsr @r3                 ! call input_proc_analog(local_buf + 8)
    add #0x8, r4            ! (delay) r4 = &local_buf[8] — analog data dest
    mov r15, r2             ! r2 = &local_buf
    mov #0x31, r3           ! r3 = 0x31 — peripheral type ID (digital pad)
    mov r15, r6             ! r6 = &local_buf (3rd arg: raw buffer)
    mov r15, r5             ! r5 = &local_buf
    add #0x8, r2            ! r2 = &local_buf[8]
    add #0x8, r5            ! r5 = &local_buf[8] (2nd arg: analog data)
    mov.b r3, @r2           ! local_buf[8] = 0x31 — set peripheral type
    .byte   0xD3, 0x08    /* mov.l .L_pool_digital_fn, r3 */  ! r3 = input_proc_digital
    jsr @r3                 ! call input_proc_digital(0, &local_buf[8], &local_buf)
    mov #0x0, r4            ! (delay) r4 = 0 — port number
    mov r0, r4              ! r4 = digital result
    mov r15, r2             ! r2 = &local_buf
    mov.b @(4, r2), r0      ! r0 = local_buf[4] — button state byte
    mov r0, r3              ! r3 = button state (sign-extended)
    extu.b r3, r3           ! r3 = zero-extend to unsigned byte
    mov r4, r0              ! r0 = digital result (return value)
    mov.l r3, @r14          ! *output_ptr = button state byte (as longword)
    add #0x10, r15          ! deallocate local buffer
    lds.l @r15+, pr         ! restore return address
    rts                     ! return r0 = digital result
    mov.l @r15+, r14        ! (delay) restore r14
.L_pool_analog_fn:
    .4byte  input_proc_analog
    .4byte  input_proc_buttons
.L_pool_digital_fn:
    .4byte  input_proc_digital
